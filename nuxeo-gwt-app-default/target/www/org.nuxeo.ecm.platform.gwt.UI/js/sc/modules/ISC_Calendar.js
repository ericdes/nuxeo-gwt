/*
 * Isomorphic SmartClient
 * Version 7.0beta2 (2008-11-15)
 * Copyright(c) 1998-2007 Isomorphic Software, Inc. All rights reserved.
 * "SmartClient" is a trademark of Isomorphic Software, Inc.
 *
 * licensing@smartclient.com
 *
 * http://smartclient.com/license
 */

if(window.isc&&window.isc.module_Core&&!window.isc.module_Calendar){isc.module_Calendar=1;isc._moduleStart=isc._Calendar_start=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc._moduleEnd&&(!isc.Log||(isc.Log && isc.Log.logIsDebugEnabled('loadTime')))){isc._pTM={ message:'Calendar load/parse time: ' + (isc._moduleStart-isc._moduleEnd) + 'ms', category:'loadTime'};
if(isc.Log && isc.Log.logDebug)isc.Log.logDebug(isc._pTM.message,'loadTime')
else if(isc._preLog)isc._preLog[isc._preLog.length]=isc._pTM
else isc._preLog=[isc._pTM]}isc.ClassFactory.defineClass("Calendar","Canvas");isc.A=isc.Calendar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.defaultWidth="100%";isc.A.defaultHeight="100%";isc.A.year=new Date().getFullYear();isc.A.month=new Date().getMonth();isc.A.chosenDate=new Date();isc.A.firstDayOfWeek=0;isc.A.baseStyle="calendar";isc.A.dayHeaderBaseStyle="calMonthDayHeader";isc.A.dayBodyBaseStyle="calMonthDayBody";isc.A.otherDayHeaderBaseStyle="calMonthOtherDayHeader";isc.A.otherDayBodyBaseStyle="calMonthOtherDayBody";isc.A.otherDayBlankStyle="calMonthOtherDayBlank";isc.A.selectedCellStyle="calendarCellSelected";isc.A.eventWindowStyle="eventWindow";isc.A.calMonthEventLinkStyle="calMonthEventLink";isc.A.workdayBaseStyle="calendarWorkday";isc.A.workdayStart="9:00am";isc.A.workdayEnd="5:00pm";isc.A.showWorkday=false;isc.A.scrollToWorkday=false;isc.A.nameField="name";isc.A.descriptionField="description";isc.A.startDateField="startDate";isc.A.endDateField="endDate";isc.A.eventWindowStyleField="eventWindowStyle";isc.A.canEditField="canEdit";isc.A.weekEventBorderOverlap=false;isc.A.eventSnapGap=30;isc.A.showQuickEventDialog=true;isc.A.canCreateEvents=true;isc.A.canEditEvents=true;isc.A.canDeleteEvents=true;isc.A.showDateChooser=false;isc.A.disableWeekends=true;isc.A.showWeekends=true;isc.A.showDayHeaders=true;isc.A.showOtherDays=true;isc.A.invalidDateMessage="From must be before To";isc.A.dayViewConstructor="DaySchedule";isc.A.weekViewConstructor="DaySchedule";isc.A.monthViewConstructor="MonthSchedule";isc.A.mainViewDefaults={_constructor:isc.TabSet,defaultWidth:"80%",defaultHeight:"100%",tabBarAlign:"right",selectedTab:1};isc.A.dateChooserConstructor="DateChooser";isc.A.eventDialogDefaults={_constructor:isc.Window,showHeaderIcon:false,showMinimizeButton:false,showMaximumButton:false,canDragReposition:true,overflow:"visible",bodyProperties:{overflow:"visible"},width:400,height:100};isc.A.eventEditorDefaults={_constructor:isc.DynamicForm,padding:4,numCols:4,showInlineErrors:false,width:200};isc.A.eventEditorLayoutDefaults={_constructor:isc.Window,showHeaderIcon:false,showShadow:false,showMinimizeButton:false,showMaximumButton:false,canDragReposition:false};isc.A.addEventButtonDefaults={_constructor:isc.ImgButton,title:"",src:"[SKINIMG]actions/add.png",prompt:"Add an event",showRollOver:false,showDown:false,width:16,height:16};isc.A.datePickerButtonDefaults={_constructor:isc.ImgButton,title:"",prompt:"Choose a date",src:"[SKIN]/controls/date_control.gif",width:16,height:16,showRollOver:false};isc.A.controlsBarDefaults={_constructor:isc.HLayout,defaultLayoutAlign:"center",height:25,membersMargin:5};isc.A.previousButtonDefaults={_constructor:isc.ImgButton,title:"",prompt:"Previous",src:"[SKINIMG]actions/back.png",width:16,height:16,click:"this.creator.previous()",showRollOver:false,showDown:false};isc.A.nextButtonDefaults={_constructor:isc.ImgButton,title:"",prompt:"Next",src:"[SKINIMG]actions/forward.png",width:16,height:16,click:"this.creator.next()",showRollOver:false,showDown:false};isc.A.dateDisplayDefaults={_constructor:isc.Label,wrap:false,autoFit:true,contents:"-"};isc.B.push(isc.A.initWidget=function(){this.$529();this.createChildren();this.$53a();this.setData(this.data?null:this.getDefaultData())}
,isc.A.getDefaultData=function(){return[]}
,isc.A.setData=function(_1){if(this.data==_1)return;if(this.data){this.ignore(this.data,"dataChanged");if(this.data.$31k&&isc.isA.Function(this.data.destroy))
this.data.destroy()}
if(_1)this.data=_1;if(!this.data)return;this.observe(this.data,"dataChanged","observer.dataChanged()")}
,isc.A.getData=function(){return this.data}
,isc.A.hasData=function(){if(!this.data||(isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown()))
{return false}else{return true}}
,isc.A.dataChanged=function(){if(this.$53e){this.logDebug('dataChanged, ignoring','calendar');this.$53e=false}else{this.logDebug('dataChanged, refreshing','calendar');this.refreshSelectedView()}}
,isc.A.refreshSelectedView=function(){if(this.dayViewSelected()){this.dayView.refreshEvents();this.monthView.refreshEvents()}
else if(this.weekViewSelected()){this.weekView.refreshEvents();this.monthView.refreshEvents()}else{this.monthView.refreshEvents()}}
,isc.A.canEditEvent=function(_1){if(!_1)return false;else if(_1[this.canEditField]!=null)return _1[this.canEditField];else return this.canEditEvents}
,isc.A.addEvent=function(_1,_2,_3,_4,_5){var _6={};_6[this.startDateField]=_1;_6[this.endDateField]=_2;_6[this.nameField]=_3;_6[this.descriptionField]=_4;var _7=this;var _8=function(_10,_11,_12){var _9=(_11?_11:_6);if(_7.$53b(_1,_2)){_7.dayView.addEvent(_9)}
if(_7.$53c(_1,_2)){_7.weekView.addEvent(_9)}
if(_7.$53d(_1,_2)){_7.monthView.refreshEvents()}}
if(_5)this.$53e=true;if(this.dataSource){this.dataSource.addData(_6,_8);return}else{this.data.add(_6);_8()}}
,isc.A.removeEvent=function(_1,_2){var _3=_1[this.startDateField],_4=_1[this.endDateField];var _5=this;var _6=function(){if(_5.$53b(_3,_4)){_5.dayView.removeEvent(_1)}
if(_5.$53c(_3,_4)){_5.weekView.removeEvent(_1)}
if(_5.$53d(_3,_4)){_5.monthView.refreshEvents()}}
if(_2)this.$53e=true;if(this.dataSource){this.dataSource.removeData(_1,_6);return}else{this.data.remove(_1);_6()}}
,isc.A.updateEvent=function(_1,_2,_3,_4,_5,_6){var _7=this;var _8=_1[this.startDateField];var _9=_1[this.endDateField];var _10=function(_14,_15,_16){var _11=(_15?_15:_1);if(_7.$53b(_8,_9)||_7.$53b(_2,_3)){_7.dayView.refreshEvents()}
if(_7.$53c(_2,_3)){_7.weekView.updateEventWindow(_11)}
if(_7.$53d(_2,_3)){_7.monthView.refreshEvents()}
if(this.eventChanged)this.eventChanged(_11)}
if(_6)this.$53e=true;if(this.dataSource){var _12={};_12[this.startDateField]=_2;_12[this.endDateField]=_3;_12[this.descriptionField]=_5;_12[this.nameField]=_4;var _13=isc.addProperties({},_1,_12);this.dataSource.updateData(_13,_10);return}else{_1[this.startDateField]=_2;_1[this.endDateField]=_3;_1[this.descriptionField]=_5;_1[this.nameField]=_4;_10()}}
,isc.A.$53b=function(_1,_2){var _3=new Date(this.year,this.month,this.chosenDate.getDate(),0,0);var _4=new Date(this.year,this.month,this.chosenDate.getDate(),23,59);if(this.dayView.body&&_3.getTime()<=_1.getTime()&&_4.getTime()>=_2.getTime()){return true}else return false}
,isc.A.$53c=function(_1,_2){if(this.weekView.body&&this.chosenWeekStart.getTime()<=_1.getTime()&&this.chosenWeekEnd.getTime()>=_2.getTime()){return true}else return false}
,isc.A.$53d=function(_1,_2){var _3=new Date(this.year,this.month,-7);var _4=new Date(this.year,this.month,37);if(_3.getTime()<=_1.getTime()&&_4.getTime()>=_2.getTime()){return true}else return false}
,isc.A.$53f=function(_1){var _2=this.canEditEvent(_1);var _3=this.canDeleteEvents==null?_2:this.canDeleteEvents;var _4=_1[this.eventWindowStyleField]||this.eventWindowStyle;return isc.EventWindow.create({calendar:this,className:_4,baseStyle:_4,canDragReposition:_2,canDragResize:_2,showCloseButton:_3,event:_1,descriptionText:_1[this.descriptionField]})}
,isc.A.$53g=function(_1,_2){var _3=[];var _4=Date.getWeekendDays();for(var i=0;i<this.data.getLength();i++){var _6=this.data.get(i);if(!_6[this.startDateField])return[];if(_6[this.startDateField].getTime()>=_1.getTime()&&_6[this.endDateField].getTime()<=_2.getTime()&&(this.showWeekends||!_4.contains(_6[this.startDateField].getDay()))){_3.add(_6)}}
return _3}
,isc.A.$529=function(){var _1=this.chosenWeekStart=new Date(this.year,this.month,this.chosenDate.getDate()
-this.chosenDate.getDay());this.chosenWeekEnd=new Date(_1.getFullYear(),_1.getMonth(),_1.getDate()+6,23,59)}
,isc.A.setChosenDate=function(_1){this.year=_1.getFullYear();this.month=_1.getMonth();this.$53h=this.chosenDate;this.chosenDate=_1;this.$529();if(this.$53h.getFullYear()!=this.year||this.$53h.getMonth()!=this.month){this.monthView.refreshEvents()}
var _2=new Date(this.$53h.getFullYear(),this.$53h.getMonth(),this.$53h.getDate()-this.$53h.getDay());var _3=new Date(_2.getFullYear(),_2.getMonth(),_2.getDate()+6);var _4=this.chosenDate.getTime();if(_4<_2.getTime()||_4>_3.getTime()){this.weekView.refreshEvents();this.$53a()}
if(_4!=this.$53h.getTime()){this.dayView.refreshStyle();this.dayView.refreshEvents()}
this.setDateLabel();this.dateChanged()}
,isc.A.$53a=function(){var _1=new Date(this.chosenWeekStart.getFullYear(),this.chosenWeekStart.getMonth(),this.chosenWeekStart.getDate());var _2=Date.getShortDayNames();var _3=Date.getWeekendDays();for(var i=1;i<8;i++){if(this.weekView.getFieldNum("day"+i)>=0){var _5=_2[_1.getDay()]+" "+(_1.getMonth()+1)+"/"+_1.getDate();this.weekView.setFieldProperties("day"+i,{title:_5,align:"right"})}
_1.setDate(_1.getDate()+1)}}
,isc.A.next=function(){if(this.dayViewSelected()){var _1=new Date(this.year,this.month,this.chosenDate.getDate()+1);if(!this.showWeekends){var _2=Date.getWeekendDays();for(var i=0;i<_2.length;i++){if(_2.contains(_1.getDay()))_1.setDate(_1.getDate()+1)}}}else if(this.weekViewSelected()){var _1=new Date(this.year,this.month,this.chosenDate.getDate()+7)}else{var _1=new Date(this.year,this.month+1,1)}
this.dateChooser.setData(_1);this.setChosenDate(_1)}
,isc.A.previous=function(){if(this.dayViewSelected()){var _1=new Date(this.year,this.month,this.chosenDate.getDate()-1);if(!this.showWeekends){var _2=Date.getWeekendDays();for(var i=0;i<_2.length;i++){if(_2.contains(_1.getDay()))_1.setDate(_1.getDate()-1)}}}else if(this.weekViewSelected()){var _1=new Date(this.year,this.month,this.chosenDate.getDate()-7)}else{var _1=new Date(this.year,this.month-1,1)}
this.dateChooser.setData(_1);this.setChosenDate(_1)}
,isc.A.dataArrived=function(){return true}
,isc.A.draw=function(_1,_2,_3,_4){this.invokeSuper(isc.Calendar,"draw",_1,_2,_3,_4);if(this.dataSource){this.observe(this.data,"dataArrived","observer.dataArrived()")}
if(this.mainView.isA("TabSet")){this.mainView.addChild(this.controlsBar);this.controlsBar.moveAbove(this.mainView.tabBar)}}
,isc.A.createChildren=function(){this.dateDisplay=this.createAutoChild("dateDisplay");var _1=this.dayView=this.createAutoChild("dayView",{baseStyle:this.baseStyle,viewName:"day"});var _2=this.weekView=this.createAutoChild("weekView",{$53i:true,baseStyle:this.baseStyle,viewName:"week"});var _3=this.monthView=this.createAutoChild("monthView",{baseStyle:this.baseStyle,viewName:"month"});var _4=[];if(this.showDayView!=false)_4.add({title:"Day",pane:_1});if(this.showWeekView!=false)_4.add({title:"Week",pane:_2});if(this.showMonthView!=false)_4.add({title:"Month",pane:_3});if(_4.length>1){this.mainView=this.createAutoChild("mainView",{tabs:_4,tabSelected:function(_31,_32,_33,_34){this.creator.$567=_32.viewName;this.creator.setDateLabel()}})}else{this.mainView=_4[0].pane}
var _5=20;this.addEventButton=this.createAutoChild("addEventButton",{click:function(){var _6=this.creator;_6.eventDialog.event=null;_6.eventDialog.items[0].createFields(false);var _7=new Date();if(!this.showWeekends){var _8=Date.getWeekendDays();for(var i=0;i<_8.length;i++){if(_8.contains(_7.getDay()))_7.setDate(_7.getDate()+1)}}
_7.setMinutes(0);if(_7.getHours()>22){_7.setDate(_7.getDate()+1);_7.setHours(0)}
else _7.setHours(_7.getHours()+1);_6.eventDialog.setDate(_7);_6.eventDialog.setPageLeft(_6.getPageLeft());_6.eventDialog.setPageTop(this.getPageTop()+this.getVisibleHeight());_6.eventDialog.show()}});this.datePickerButton=this.createAutoChild("datePickerButton",{click:function(){var _6=this.creator;if(this.$54x){this.$54x.setData(_6.chosenDate);this.$54x.draw()}else{this.$54x=isc.DateChooser.create({calendar:this.creator,autoDraw:false,showCancelButton:true,autoClose:true,disableWeekends:this.creator.disableWeekends,showWeekends:this.creator.showWeekends,dateClick:function(_31,_32,_33){var _10=new Date(_31,_32,_33);this.setData(_10);this.calendar.dateChooser.dateClick(_31,_32,_33);this.close()}});this.$54x.setData(_6.chosenDate);_6.addChild(this.$54x);this.$54x.placeNextTo(this,"bottom",true)}}});this.previousButton=this.createAutoChild("previousButton",{});this.nextButton=this.createAutoChild("nextButton",{});var _11=[];_11.add(this.previousButton);_11.add(this.dateDisplay);if(this.showDatePickerButton!=false)_11.add(this.datePickerButton);if(this.canCreateEvents&&this.showAddEventButton!=false)_11.add(this.addEventButton);_11.add(this.nextButton);this.controlsBar=this.createAutoChild("controlsBar",{members:_11});if(_4.length==1)this.controlsBar.layoutAlign="center";this.dateChooser=this.createAutoChild("dateChooser",{disableWeekends:this.disableWeekends,showWeekends:this.showWeekends,dateClick:function(_31,_32,_33){var _10=new Date(_31,_32,_33);this.setData(_10);this.creator.setChosenDate(_10)},showPrevYear:function(){this.year--;this.dateClick(this.year,this.month,this.chosenDate.getDate())},showNextYear:function(){this.year++;this.dateClick(this.year,this.month,this.chosenDate.getDate())},showPrevMonth:function(){if(--this.month==-1){this.month=11;this.year--}
this.dateClick(this.year,this.month,1)},showNextMonth:function(){if(++this.month==12){this.month=0;this.year++}
this.dateClick(this.year,this.month,1)}});this.eventDialog=this.createAutoChild("eventDialog",{items:[isc.DynamicForm.create({autoDraw:false,padding:4,calendar:this,saveOnEnter:true,useAllDataSourceFields:true,createFields:function(_31){var _12=_31?"staticText":"text";var _13=[{name:"name",title:"Event Name",type:_12,width:250},{name:"save",title:"Save Event",type:"SubmitItem",endRow:false},{name:"details",title:"Edit Details",type:"button",startRow:false,click:function(_21,_32){_21.calendar.$53j(_21.calendar.eventDialog.event)}}];if(_31)_13.removeAt(1);var _14=isc.DataSource.create({addGlobalId:false,fields:_13});this.setDataSource(_14);this.setFields(isc.clone(this.calendar.eventDialogFields))},submit:function(){var _6=this.calendar,_15=_6.eventDialog.event,_16=_6.eventDialog.currentStart,_17=_6.eventDialog.currentEnd;if(_15){_6.updateEvent(_15,_16,_17,this.getItem("name").getValue(),_15[_6.descriptionField],true);_6.eventDialog.hide()}else{_6.addEvent(_16,_17,this.getItem("name").getValue(),"",true);_6.eventDialog.hide()}}})],setDate:function(_31,_32){if(!_32){if(_31.getHours()==23&&_31.getMinutes()==30){_32=new Date(_31.getFullYear(),_31.getMonth(),_31.getDate()+1)}else{_32=new Date(_31.getFullYear(),_31.getMonth(),_31.getDate(),_31.getHours()+1,_31.getMinutes())}}
this.setTitle(this.creator.$53k(_31,_32));this.currentStart=_31;this.currentEnd=_32;this.items[0].getItem("name").setValue("")},setEvent:function(_31){this.event=_31;this.setDate(_31[this.creator.startDateField],_31[this.creator.endDateField]);this.items[0].getItem("name").setValue(_31[this.creator.nameField])},closeClick:function(){this.Super('closeClick');this.creator.dayView.clearSelection();this.creator.weekView.clearSelection()},show:function(){if(this.creator.showQuickEventDialog){if(!this.isDrawn())this.draw();this.Super('show');this.items[0].getItem("name").focusInItem()}else{this.creator.$53j(this.event)}},hide:function(){this.Super('hide');this.moveTo(0,0)}});this.eventEditor=this.createAutoChild("eventEditor",{useAllDataSourceFields:true,initWidget:function(){this.invokeSuper(isc.DynamicForm,"initWidget",arguments);this.timeFormat=this.creator.timeFormat;var _13=[{name:"startHours",title:"From",type:"select",width:60},{name:"startMinutes",showTitle:false,type:"select",width:60},{name:"startAMPM",showTitle:false,type:"select",width:60},{name:"invalidDate",type:"blurb",colSpan:4,visible:false,defaultValue:this.creator.invalidDateMessage},{name:"endHours",title:"To",type:"select",width:60},{name:"endMinutes",showTitle:false,type:"select",width:60},{name:"endAMPM",showTitle:false,type:"select",width:60},{name:"name",title:"Name",type:"text",colSpan:4},{name:"description",title:"Description",type:"textArea",colSpan:4,height:50}];_13[0].valueMap=this.getTimeValues("hours");_13[1].valueMap=this.getTimeValues("minutes");_13[2].valueMap=this.getTimeValues();_13[3].cellStyle=this.errorStyle||"formCellError";_13[4].valueMap=this.getTimeValues("hours");_13[5].valueMap=this.getTimeValues("minutes");_13[6].valueMap=this.getTimeValues();var _18=isc.DataSource.create({addGlobalId:false,fields:_13});this.setDataSource(_18);this.setFields(isc.clone(this.creator.eventEditorFields))},getTimeValues:function(_31,_32){if(!_32)_32=0;var _19={};if(_31=="hours"){for(var i=_32;i<12;i++){_19[(i+1)+""]=(i+1)}}else if(_31=="minutes"){for(var i=0;i<60;i++){var _20=i<10?"0"+i:""+i;_19[i+""]=_20}}else{_19["am"]="am";_19["pm"]="pm"}
return _19}});this.eventEditorLayout=this.createAutoChild("eventEditorLayout",{items:[this.eventEditor,isc.HLayout.create({membersMargin:10,layoutMargin:10,autoDraw:false,members:[isc.IButton.create({autoDraw:false,title:"Save Event",calendar:this,click:function(){var _6=this.calendar,_15=_6.eventEditorLayout.event,_21=_6.eventEditor,_22=_21.getItem("startHours").getValue(),_23=_21.getItem("endHours").getValue(),_24=_21.getItem("startMinutes").getValue(),_25=_21.getItem("endMinutes").getValue();var _26,_27;if(!_6.twentyFourHourTime){_26=_21.getItem("startAMPM").getValue();_27=_21.getItem("endAMPM").getValue();_22=_6.$534(_22,_26);_23=_6.$534(_23,_27);if(_23==0)_23=24}
if(!(_22<_23||(_22==_23&&_24<_25))){_21.showItem("invalidDate");return}
var _16=_6.eventEditorLayout.currentStart,_17=_6.eventEditorLayout.currentEnd;_16.setHours(_22);_16.setMinutes(_24);_17.setHours(_23);_17.setMinutes(_25);if(_15){_6.updateEvent(_15,_16,_17,_21.getItem("name").getValue(),_21.getItem("description").getValue(),true);_6.eventEditorLayout.hide()}else{_6.addEvent(_16,_17,_21.getItem("name").getValue(),_21.getItem("description").getValue(),true);_6.eventEditorLayout.hide()}}}),isc.IButton.create({autoDraw:false,title:"Cancel",calendar:this,click:function(){this.calendar.eventEditorLayout.hide()}})]})],setDate:function(_31,_32,_33){if(!_33)_33="";if(!_32){_32=new Date(_31.getFullYear(),_31.getMonth(),_31.getDate(),_31.getHours()+1,_31.getMinutes())}
var _6=this.creator;this.setTitle(_6.$53k(_31,_32));this.currentStart=_31;this.currentEnd=_32;this.items[0].getItem("startHours").setValue(this.getHours(_31.getHours()));this.items[0].getItem("endHours").setValue(this.getHours(_32.getHours()));this.items[0].getItem("startMinutes").setValue(_31.getMinutes());this.items[0].getItem("endMinutes").setValue(_32.getMinutes());if(!_6.twentyFourHourTime){this.items[0].getItem("startAMPM").setValue(this.getAMPM(_31.getHours()));this.items[0].getItem("endAMPM").setValue(this.getAMPM(_32.getHours()))}
this.items[0].getItem("name").setValue(_33);this.items[0].getItem("description").setValue("")},getHours:function(_31){if(this.creator.twentyFourHourTime)return _31;else return this.creator.$53n(_31)},getAMPM:function(_31){if(_31<12)return"am";else return"pm"},setEvent:function(_31){this.event=_31;this.setDate(_31[this.creator.startDateField],_31[this.creator.endDateField]);this.items[0].getItem("name").setValue(_31[this.creator.nameField]);this.items[0].getItem("description").setValue(_31[this.creator.descriptionField])},hide:function(){this.Super('hide');this.creator.dayView.clearSelection();this.creator.weekView.clearSelection();this.creator.eventEditor.hideItem("invalidDate")},sizeMe:function(){this.setWidth(this.creator.mainView.getVisibleWidth());this.setHeight(this.creator.mainView.getVisibleHeight());this.setLeft(this.creator.mainView.getLeft())}});if(!this.children)this.children=[];var _28=[];var _29=[];_29.add(this.dateChooser);if(this.showDateChooser){_28.add(isc.VLayout.create({autoDraw:false,width:"20%",membersMargin:10,layoutTopMargin:10,members:_29}))}
if(this.mainView.isA("TabSet")){_28.add(this.mainView)}else{var _30=isc.HLayout.create({autoDraw:false,height:this.controlsBar.getVisibleHeight(),width:"100%"});_30.addMember(isc.LayoutSpacer.create({autoDraw:false,width:"*"}));_30.addMember(this.controlsBar);_30.addMember(isc.LayoutSpacer.create({autoDraw:false,width:"*"}));_28.add(isc.VLayout.create({autoDraw:false,members:[_30,this.mainView]}))}
this.children.add(isc.HLayout.create({autoDraw:false,width:"100%",height:"100%",members:_28}));this.eventEditorLayout.hide();this.setDateLabel()}
,isc.A.setDateLabel=function(){if(this.dayViewSelected()){this.dateDisplay.setContents("<b>"+this.chosenDate.getShortMonthName()+" "+this.chosenDate.getDate()+", "+this.chosenDate.getFullYear()+"</b>")}else if(this.weekViewSelected()){var _1=new Date(this.year,this.month,this.chosenDate.getDate()
-this.chosenDate.getDay());var _2=new Date(_1.getFullYear(),_1.getMonth(),_1.getDate()+6);if(_1.getMonth()!=_2.getMonth()){this.dateDisplay.setContents("<b>"+_1.getShortMonthName()+" "+_1.getDate()+", "+_1.getFullYear()+" - "+_2.getShortMonthName()+" "+_2.getDate()+", "+_2.getFullYear()+"</b>")}else{this.dateDisplay.setContents("<b>"+_1.getShortMonthName()+" "+_1.getDate()+" - "+(_1.getDate()+6)+" "+_1.getFullYear()+"</b>")}}else{this.dateDisplay.setContents("<b>"+this.chosenDate.getShortMonthName()+" "+this.chosenDate.getFullYear()+"</b>")}}
,isc.A.dayViewSelected=function(){if(!this.mainView.isA("TabSet"))return this.mainView.viewName=="day";else return this.$567=="day"}
,isc.A.weekViewSelected=function(){if(!this.mainView.isA("TabSet"))return this.mainView.viewName=="week";else return this.$567=="week"}
,isc.A.monthViewSelected=function(){if(!this.mainView.isA("TabSet"))return this.mainView.viewName=="month";return this.$567=="month"}
,isc.A.$53l=function(_1,_2,_3,_4){var _5;if(this.dayViewSelected())_5=this.dayView;else if(this.weekViewSelected())_5=this.weekView;else _5=this.monthView;if(!_4){this.eventDialog.event=null;this.eventDialog.items[0].createFields(false);var _6,_7;if(this.monthViewSelected()){var _8=new Date();_8=_8.getHours();if(_8>22)_8-=1;var _9=_1%2==0?_1:_1-1;var _10=this.monthView.data[_9]["day"+(this.$55l(_2)+1)],_11;if((_1==0||_1==1)&&_10>7){_11=this.month-1}else if(_1>7&&_10<8){_11=this.month+1}else{_11=this.month}
_6=new Date(this.year,_11,_10,_8)}
else{_6=this.$53m(_1,_2)}
if(_3&&_3>1){_7=this.$53m(_1+_3,_2)}
this.eventDialog.setDate(_6,_7)}else{this.eventDialog.eventWindow=_4;this.eventDialog.items[0].createFields(true);this.eventDialog.setEvent(_4.event)}
this.eventDialog.moveTo(0,-10000);this.eventDialog.show();var _12=_5.getCellPageRect(_1,_2);this.eventDialog.placeNear(_12[0],_12[1])}
,isc.A.$53j=function(_1){if(!this.eventEditorLayout.isDrawn())this.eventEditorLayout.draw();this.eventEditorLayout.setWidth(this.mainView.getVisibleWidth());this.eventEditorLayout.setHeight(this.mainView.getVisibleHeight());this.eventEditorLayout.setPageLeft(this.mainView.getPageLeft());this.eventEditorLayout.setPageTop(this.getPageTop());if(_1){this.eventEditorLayout.setEvent(_1)}else{this.eventEditorLayout.setDate(this.eventDialog.currentStart,this.eventDialog.currentEnd,this.eventDialog.items[0].getItem("name").getValue())}
this.eventDialog.hide();this.eventEditorLayout.show()}
,isc.A.$53k=function(_1,_2){var _3=Date.getShortDayNames();var _4=Date.getShortMonthNames();var _5=_1.getHours(),_6=_2.getHours(),_7=_1.getMinutes(),_8=_2.getMinutes(),_9,_10;_9=this.$53n(_5)+(_7<10?":0"+_7:":"+_7);_10=this.$53n(_6)+(_8<10?":0"+_8:":"+_8)+(_6>11?"pm":"am");if(!((_5<12&&_6<12)||(_5>11&&_6>11)))_9+=(_5>11?"pm":"am");var _11=_9+" - "+_10;return _3[_1.getDay()]+", "+_4[_1.getMonth()]+" "+_1.getDate()+", "+_11}
,isc.A.$53n=function(_1){if(_1==0)return 12;else if(_1<13)return _1;else return _1-12}
,isc.A.$534=function(_1,_2){_1=parseInt(_1);if(_2.toLowerCase()=="am"&&_1==12){return 0}else if(_2.toLowerCase()=="pm"&&_1<12){return _1+12}else{return _1}}
,isc.A.$53m=function(_1,_2){var _3=this.weekViewSelected()&&this.weekView.isLabelCol(0)?_2-1:_2;_3=this.$55l(_3);var _4=new Date(this.year,this.month,this.chosenDate.getDate());if(this.weekViewSelected())_4.setDate(_4.getDate()-this.chosenDate.getDay()+_3);var _5,_6=_1,_7=0;if(_1%2==1){_6=_1-1;_7=30}
_4.setHours(_6/ 2,_7);return _4}
,isc.A.$54g=function(_1,_2){return Math.round((_2/ 30)*_1)}
,isc.A.$55l=function(_1){var _2=_1;if(!this.showWeekends){var _3=Date.getWeekendDays();for(var i=0;i<_3.length;i++){if(_3[i]<=_1)_2++}
return _2}else return _1}
,isc.A.monthViewEventClick=function(_1,_2,_3){var _4=this.monthView.data[_1]["event"+(_2+1)][_3];if(this.eventClick(_4,"month"))this.$53j(_4)}
,isc.A.getDayBodyHTML=function(_1,_2,_3,_4,_5){var _6=_1.getDay();var _7=_2,_8=15,_9=this.monthView.getRowSize(1);var _10="";for(var i=0;i<_7.length;i++){var _12=_7[i][this.startDateField].getHours();_12=this.$53n(_12)+(_12>11?"P ":" ");if(this.canEditEvent(_7[i])){var _13="<a href='javascript:"+this.ID+".monthViewEventClick("+_4+","+_6+","+i+");' class='"+this.calMonthEventLinkStyle+"'>";_10+=_13+_12+_7[i][this.nameField]+"</a><br/>"}else{_10+=_12+_7[i][this.nameField]+"<br/>"}
if((i+3)*_8>_9)break}
if(i<_7.length-1){_10+="+ "+(_7.length-1-i)+" more..."}
return _10}
,isc.A.getDayHeaderHTML=function(_1,_2,_3,_4,_5){return _1.getDate()}
,isc.A.dayBodyClick=function(_1,_2,_3,_4,_5){return true}
,isc.A.dayHeaderClick=function(_1,_2,_3,_4,_5){return true}
,isc.A.eventClick=function(){return true}
,isc.A.eventMoved=function(){return true}
,isc.A.eventResized=function(){return true}
,isc.A.getValidSnapDate=function(_1,_2){var _3=this.eventSnapGap;var _4=((_1.getHours()*60)+_1.getMinutes())%_3;var _5=(_2.getHours()*60)+_2.getMinutes();var _6=Math.round((_5-_4)/_3);var _7=(_6*_3)+_4;var _8=Math.floor(_7/ 60),_9=_7%60;_2.setHours(_8);_2.setMinutes(_9);return _2}
,isc.A.selectTab=function(_1){if(this.mainView&&this.mainView.isA("TabSet")&&this.mainView.tabs.getLength()>_1){this.mainView.selectTab(_1);return true}else{return false}}
,isc.A.parentResized=function(){this.Super('parentResized',arguments);if(this.eventEditorLayout.isVisible())this.eventEditorLayout.sizeMe()}
,isc.A.dateChanged=function(){return true}
);isc.B._maxIndex=isc.C+48;isc.ClassFactory.defineClass("DaySchedule","ListGrid");isc.DaySchedule.changeDefaults("bodyProperties",{childrenSnapToGrid:true,snapToCells:true});isc.A=isc.DaySchedule.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoDraw=false;isc.A.canSort=false;isc.A.canResizeFields=false;isc.A.canReorderFields=false;isc.A.showHeader=false;isc.A.showHeaderContextMenu=false;isc.A.showAllRecords=true;isc.A.fixedRecordHeights=true;isc.A.labelColumnWidth=40;isc.A.labelColumnAlign="right";isc.A.showLabelColumn=true;isc.A.labelColumnPosition="left";isc.A.labelColumnBaseStyle="labelColumn";isc.A.showRollOver=true;isc.A.useCellRollOvers=true;isc.A.canSelectCells=true;isc.B.push(isc.A.initWidget=function(){this.fields=[];var _1={width:this.labelColumnWidth,name:"label",title:" ",cellAlign:"right",formatCellValue:function(_7,_8,_9,_10,_11){var _2=(_9>23?" PM":" AM");if(_9%2==0){if(_9==0||_9==48)return"12 "+_2;else if(_9>24)return((_9/ 2)-12)+_2;else return(_9/ 2)+_2}
else{return""}}}
if(this.showLabelColumn&&this.labelColumnPosition=="left"){this.fields.add(_1)}
this.fields.add({name:"day1",align:"center"});if(this.$53i){var _3=8;for(var i=2;i<_3;i++){this.fields.add({name:"day"+i,align:"center"})}
this.showHeader=true}
if(this.$53i&&!this.creator.showWeekends){var _5=this.showLabelColumn&&this.labelColumnPosition=="left"?1:0;var _6=Date.getWeekendDays();for(var i=0;i<_6.length;i++){this.fields[((_6[i]+this.creator.firstDayOfWeek)%7)+_5].showIf="return false;"}}
if(this.showLabelColumn&&this.labelColumnPosition=="right"){this.fields.add(_1)}
this.data=isc.DaySchedule.$53o;this.Super("initWidget")}
,isc.A.draw=function(_1,_2,_3,_4){this.invokeSuper(isc.DaySchedule,"draw",_1,_2,_3,_4);this.logDebug('draw','calendar');this.refreshEvents();this.setSnapGap()}
,isc.A.setSnapGap=function(){var _1=this.creator.eventSnapGap;this.body.snapVGap=Math.round((_1/ 30)*this.body.getRowSize(0))}
,isc.A.scrollToWorkdayStart=function(){var _1=isc.Time.parseInput(this.creator.workdayStart);var _2=_1.getUTCHours()*2;if(_1.getUTCMinutes()>0)_2++;var _3=this.getRowHeight(null,0)*_2;this.body.scrollTo(0,_3)}
,isc.A.getRowHeight=function(_1,_2){if(this.creator.scrollToWorkday){var _3=isc.Time.parseInput(this.creator.workdayEnd).getUTCHours()
-isc.Time.parseInput(this.creator.workdayStart).getUTCHours();if(_3<=0)return this.cellHeight;var _4=Math.floor(this.body.getViewportHeight()/(_3*2));return _4<this.cellHeight?this.cellHeight:_4}else{return this.cellHeight}}
,isc.A.getDayFromCol=function(_1){var _2=_1
if(this.isLabelCol(0))_2-=1;if(this.creator.showWeekends){return(_2+this.creator.firstDayOfWeek)%7}else{return(_2+1+this.creator.firstDayOfWeek)%7}}
,isc.A.isLabelCol=function(_1){if(_1==0&&this.showLabelColumn&&this.labelColumnPosition=="left"){return true}else if(_1==this.fields.length-1&&this.showLabelColumn&&this.labelColumnPosition=="right"){return true}else{return false}}
,isc.A.colDisabled=function(_1){var _2=this.$53i?this.getDayFromCol(_1):this.creator.chosenDate.getDay();if(this.creator.disableWeekends&&Date.getWeekendDays().contains(_2)){return true}else{return false}}
,isc.A.refreshStyle=function(){if(!this.body)return;for(var i=0;i<this.data.length;i++){this.body.refreshCellStyle(i,1)}}
,isc.A.headerClick=function(_1,_2){if(this.isLabelCol(_1))return true;_1=this.getDayFromCol(_1);var _3=this.creator;var _4=new Date(_3.chosenWeekStart.getFullYear(),_3.chosenWeekStart.getMonth(),_3.chosenWeekStart.getDate());_4.setDate(_4.getDate()+_1);_3.dateChooser.dateClick(_4.getFullYear(),_4.getMonth(),_4.getDate());_3.selectTab(0);return true}
,isc.A.getCellAlign=function(_1,_2,_3){return this.labelColumnAlign}
,isc.A.cellMouseDown=function(_1,_2,_3){if(this.isLabelCol(_3)||this.colDisabled(_3))return true;if(!this.creator.canCreateEvents)return true;this.clearSelection();this.$53q={};this.$53q.colNum=_3;this.$53q.startRowNum=_2;this.$53q.endRowNum=_2;this.$53r=true;this.refreshCellStyle(_2,_3)}
,isc.A.cellOver=function(_1,_2,_3){if(this.$53r&&this.$53q){var _4;if(this.$53q.startRowNum<this.$53q.endRowNum){if(_2>this.$53q.endRowNum){_4=_2}else{_4=this.$53q.endRowNum}
this.$53q.endRowNum=_2}else{if(_2<this.$53q.endRowNum){_4=_2}else{_4=this.$53q.endRowNum}
this.$53q.endRowNum=_2}
var _5=6;var _3=this.$53q.colNum;for(var i=_4-_5;i<_4+_5;i++){if(i>=0&&i<=47)this.refreshCellStyle(i,_3)}}}
,isc.A.cellMouseUp=function(_1,_2,_3){if(!this.$53q)return true;this.$53r=false;var _4,_5,_6;if(this.$53q.startRowNum>this.$53q.endRowNum){_4=this.$53q.endRowNum;_5=this.$53q.startRowNum}else{_5=this.$53q.endRowNum;_4=this.$53q.startRowNum}
_6=_5-_4+1;this.creator.$53l(_4,this.$53q.colNum,_6)}
,isc.A.getCellStyle=function(_1,_2,_3){var _4=this.getBaseStyle(_1,_2,_3);if(this.isLabelCol(_3))return _4;if(this.colDisabled(_3))return this.baseStyle+"Disabled";if(this.$53q&&this.$53q.colNum==_3){var _5=this.$53q.startRowNum,_6=this.$53q.endRowNum;if(_2>=_5&&_2<=_6||_2>=_6&&_2<=_5){return this.creator.selectedCellStyle}else{return _4}}else{return _4}}
,isc.A.getBaseStyle=function(_1,_2,_3){if(this.isLabelCol(_3))return this.labelColumnBaseStyle;var _4=this.$53i?parseInt(this.getField(_3).name.charAt(3))-1:this.creator.chosenDate.getDay();var _5=isc.Time.parseInput(this.creator.workdayStart),_6=isc.Time.parseInput(this.creator.workdayEnd),_7=new Date();_7.setUTCHours(Math.floor(_2/ 2));if(_2%2==1)_7.setUTCMinutes(30);else _7.setUTCMinutes(0);_7=_7.getTime();if(this.creator.showWorkday&&_5.getTime()<=_7&&_7<_6.getTime()&&!Date.getWeekendDays().contains(_4)){return this.creator.workdayBaseStyle}else{return this.baseStyle}}
,isc.A.clearSelection=function(){if(this.$53q){var _1,_2,_3=this.$53q.colNum;if(this.$53q.startRowNum<this.$53q.endRowNum){_1=this.$53q.startRowNum;_2=this.$53q.endRowNum}else{_1=this.$53q.endRowNum;_2=this.$53q.startRowNum}
this.$53q=null;for(var i=_1;i<_2+1;i++){this.refreshCellStyle(i,_3)}}}
,isc.A.refreshEvents=function(){if(!this.body||!this.creator.hasData())return;this.logDebug('refreshEvents:'+this.viewName,"calendar");this.clearEvents();var _1,_2,_3=this.creator;if(this.$53i){_1=_3.chosenWeekStart;_2=_3.chosenWeekEnd}else{_1=new Date(_3.year,_3.month,_3.chosenDate.getDate(),0,0);_2=new Date(_3.year,_3.month,_3.chosenDate.getDate(),23,59)}
var _4=_3.$53g(_1,_2);for(var i=0;i<_4.length;i++){this.addEvent(_4[i])}
if(_3.scrollToWorkday)this.scrollToWorkdayStart()}
,isc.A.clearEvents=function(){if(!this.body||!this.body.children)return;var _1=this.body.children;for(var i=_1.length-1;i>=0;i--){if(isc.isAn.EventWindow(_1[i]))this.body.removeChild(_1[i])}}
,isc.A.addEvent=function(_1){this.clearSelection();var _2=this.creator.$53f(_1);if(this.$53i)_2.$53i=true;_2.sizeToEvent();if(this.body)this.body.addChild(_2)}
,isc.A.removeEvent=function(_1){var _2=this.body.children;for(var i=0;i<_2.length;i++){if(isc.isAn.EventWindow(_2[i])&&_2[i].event===_1){var _4=_2[i];_4.parentElement.removeChild(_4);_4.destroy();return true}}
return false}
,isc.A.updateEventWindow=function(_1){if(!this.body||!this.body.children)return;var _2=this.body.children,_3=this.creator;if(_3.dataSource)_3.$53s=_3.dataSource.getLocalPrimaryKeyFields();for(var i=0;i<_2.length;i++){if(isc.isAn.EventWindow(_2[i])&&this.areSame(_2[i].event,_1)){_2[i].event=_1;_2[i].sizeToEvent();_2[i].setDescriptionText(_1[_3.descriptionField]);return true}}
return false}
,isc.A.areSame=function(_1,_2){var _3=this.creator;if(_3.dataSource){var _4=_3.$53s,_5=true;for(var _6 in _4){if(_1[_6]!=_2[_6]){_5=false;break}}
return _5}else{return(_1===_2)}}
);isc.B._maxIndex=isc.C+23;isc.ClassFactory.defineClass("MonthSchedule","ListGrid");isc.MonthSchedule.changeDefaults("headerButtonProperties",{showRollOver:false,showDown:false,cursor:"default"});isc.A=isc.MonthSchedule.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoDraw=false;isc.A.leaveScrollbarGap=false;isc.A.showAllRecords=true;isc.A.fixedRecordHeights=true;isc.A.showHeader=true;isc.A.showHeaderContextMenu=false;isc.A.canSort=false;isc.A.canResizeFields=false;isc.A.canReorderFields=false;isc.A.canHover=true;isc.A.showHover=true;isc.A.hoverWrap=false;isc.A.showRollOver=true;isc.A.useCellRollOvers=true;isc.A.canSelectCells=true;isc.A.firstDayOfWeek=0;isc.A.dayHeaderHeight=20;isc.A.mimimumDayHeight=80;isc.B.push(isc.A.initWidget=function(){if(this.creator.data)this.data=this.getDayArray();this.fields=[{name:"day1",align:"center"},{name:"day2",align:"center"},{name:"day3",align:"center"},{name:"day4",align:"center"},{name:"day5",align:"center"},{name:"day6",align:"center"},{name:"day7",align:"center"}];this.firstDayOfWeek=this.creator.firstDayOfWeek;var _1=Date.getShortDayNames();for(var i=0;i<7;i++){this.fields[i].title=_1[(i+this.firstDayOfWeek)%7]}
if(!this.creator.showWeekends){var _3=Date.getWeekendDays();for(var i=0;i<_3.length;i++){this.fields[(_3[i]+this.firstDayOfWeek)%7].showIf="return false;"}}
this.Super("initWidget")}
,isc.A.getDayArray=function(){var _1=[],_2,_3,_4=new Date(this.creator.year,this.creator.month,1);_4.setDate(_4.getDate()
-_4.getDay()+this.firstDayOfWeek
-((_4.getDay()<this.firstDayOfWeek)?7:0));_3=new Date(this.creator.year,this.creator.month,_4.getDate()+40);_2=this.creator.$53g(_4,_3);_2.sortByProperty("name",true,function(_6,_7,_8){return _6[_8.startDateField].getTime()},this.creator);this.$53t=0;for(var i=0;i<6;i++){if(this.creator.showDayHeaders)_1.add(this.getHeaderRowObject(_4));_1.add(this.getEventRowObject(_4,_2));_4.setDate(_4.getDate()+7);if(_4.getMonth()!=this.creator.month)break}
return _1}
,isc.A.getHeaderRowObject=function(_1){var _2={};var _3=new Date(_1.getFullYear(),_1.getMonth(),_1.getDate());for(var i=0;i<7;i++){_2["day"+(i+1)]=_3.getDate();_2["date"+(i+1)]=new Date(_3.getFullYear(),_3.getMonth(),_3.getDate());_3.setDate(_3.getDate()+1)}
return _2}
,isc.A.getEventRowObject=function(_1,_2){var _3={};var _4=new Date(_1.getFullYear(),_1.getMonth(),_1.getDate());for(var i=0;i<7;i++){var _6=[];while(this.$53t<_2.length){var _7=_2[this.$53t];if(_7[this.creator.startDateField].getMonth()!=_4.getMonth()||_7[this.creator.startDateField].getDate()!=_4.getDate()){break}else{_6.add(_7);this.$53t+=1}}
_3["day"+(i+1)]=_4.getDate();_3["date"+(i+1)]=new Date(_4.getFullYear(),_4.getMonth(),_4.getDate());_3["event"+(i+1)]=_6;_4.setDate(_4.getDate()+1)}
return _3}
,isc.A.getDayFromCol=function(_1){var _2=_1;if(this.creator.showWeekends){return(_2+this.creator.firstDayOfWeek)%7}else{return(_2+1+this.creator.firstDayOfWeek)%7}}
,isc.A.colDisabled=function(_1){if(this.creator.disableWeekends&&Date.getWeekendDays().contains(this.getDayFromCol(_1))){return true}else{return false}}
,isc.A.refreshEvents=function(){if(!this.creator.hasData())return;this.logDebug('refreshEvents: month','calendar');this.setData(this.getDayArray())}
,isc.A.rowIsHeader=function(_1){var _2=this.creator;if(!_2.showDayHeaders||(_2.showDayHeaders&&_1%2==1))return false;else return true}
,isc.A.formatCellValue=function(_1,_2,_3,_4){var _5=this.creator,_6=_5.$55l(_4),_7=_2["event"+(_6+1)],_8=_2["date"+(_6+1)],_9=_8.getMonth()!=_5.chosenDate.getMonth();if(this.rowIsHeader(_3)){if(!_5.showOtherDays&&_9){return""}else{return _5.getDayHeaderHTML(_8,_7,_5,_3,_4)}}else{if(!_5.showOtherDays&&_9){return""}else{return _5.getDayBodyHTML(_8,_7,_5,_3,_4)}}}
,isc.A.getRowHeight=function(_1,_2){var _3=this.creator.showDayHeaders;if(this.rowIsHeader(_2)){return this.dayHeaderHeight}else{var _4=_3?this.data.length/ 2:this.data.length,_5=_3?this.body.getViewportHeight()
-(this.dayHeaderHeight*_4):this.body.getViewportHeight(),_6=_3?this.mimimumDayHeight-this.dayHeaderHeight:this.minimumDayHeight;if(_5/ _4<=_6){return _6}else{var _7=_5%_4,_8=0,_9=_3?(_2-1)/2:_2;if(_9<_7)_8=1;return(Math.floor(_5/ _4)+_8)}}}
,isc.A.getCellAlign=function(_1,_2,_3){if(this.rowIsHeader(_2))return"right"
else return"left"}
,isc.A.getCellVAlign=function(_1,_2,_3){if(!this.rowIsHeader(_2))return"top";else return"center"}
,isc.A.cellHoverHTML=function(_1,_2,_3){var _4=this.creator.$55l(_3);if(!this.rowIsHeader(_2)&&_1["event"+(_4+1)]!=null){var _5=_1["event"+(_4+1)];var _6="";for(var i=0;i<_5.length;i++){var _8=_5[i][this.creator.startDateField].getHours();_8=this.creator.$53n(_8)+(_8>11?"P ":" ");_6+=_8+_5[i][this.creator.nameField]+"<br/>"}
return _6}}
,isc.A.getBaseStyle=function(_1,_2,_3){var _4=this.creator,_5=_4.$55l(_3)+1;if(this.rowIsHeader(_2)){if((_2==0&&_1["day"+_5]>7)||(_2==this.data.length-2&&_1["day"+_5]<7)){if(!_4.showOtherDays)return _4.otherDayBlankStyle;else return _4.otherDayHeaderBaseStyle}else return _4.dayHeaderBaseStyle}else{var _6=this.colDisabled(_3),_7=_4.showDayHeaders?1:0,_8=this.data.length-1;if((_2==_7&&this.data[_7]["day"+_5]>7)||(_2==_8&&this.data[_8]["day"+_5]<7)){if(!_4.showOtherDays)return _4.otherDayBlankStyle;else return _6?_4.otherDayBodyBaseStyle+"Disabled":_4.otherDayBodyBaseStyle}else return _6?_4.dayBodyBaseStyle+"Disabled":_4.dayBodyBaseStyle}}
,isc.A.cellClick=function(_1,_2,_3){var _4=this.creator,_5,_6,_7=_4.$55l(_3)+1,_8=_1["date"+_7],_9=_1["event"+_7],_10=_4.chosenDate.getMonth()!=_8.getMonth(),_11=false;if(this.rowIsHeader(_2)){if(!(!this.creator.showOtherDays&&_10)){_11=_4.dayHeaderClick(_8,_9,_4,_2,_3)}
if(_11){if(_2==0&&_1["day"+_7]>7){if(_4.month==0){_5=_4.year-1;_6=11}else{_5=_4.year;_6=_4.month-1}}else if(_2==this.data.length-2&&_1["day"+_7]<7){if(_4.month==11){_5=_4.year+1;_6=0}else{_5=_4.year;_6=_4.month+1}}else{_5=_4.year;_6=_4.month}
_4.dateChooser.dateClick(_5,_6,_1["day"+_7]);_4.selectTab(0)}}else{if(!this.colDisabled(_3)&&!(!_4.showOtherDays&&_10)){_11=_4.dayBodyClick(_8,_9,_4,_2,_3);if(_11&&_4.canCreateEvents){_4.$53l(_2,_3)}}}}
);isc.B._maxIndex=isc.C+15;isc.ClassFactory.defineClass("EventWindow","Window");isc.EventWindow.changeDefaults("resizerDefaults",{overflow:"hidden",height:3,snapTo:"B",canDragResize:true,getEventEdge:function(){return"B"}})
isc.EventWindow.changeDefaults("headerDefaults",{layoutMargin:0,layoutLeftMargin:3,layoutRightMargin:3})
isc.A=isc.EventWindow.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoDraw=false;isc.A.minHeight=5;isc.A.showHover=true;isc.A.canHover=true;isc.A.hoverWidth=200;isc.A.showHeaderIcon=false;isc.A.showMinimizeButton=false;isc.A.showMaximimumButton=false;isc.A.canDragResize=true;isc.A.canDragReposition=true;isc.A.resizeFrom=["B"];isc.A.showShadow=false;isc.A.showEdges=false;isc.A.showHeaderBackground=false;isc.A.useBackMask=false;isc.A.keepInParentRect=true;isc.A.headerProperties={height:14};isc.A.closeButtonProperties={height:10,width:10};isc.A.bodyColor=null;isc.A.showFooter=true;isc.A.footerProperties={overflow:"hidden",defaultLayoutAlign:"center",height:7};isc.A.bodyConstructor=isc.HTMLFlow;isc.B.push(isc.A.initWidget=function(){this.bodyStyle=this.baseStyle+"Body";this.headerStyle=this.baseStyle+"Header";this.bodyProperties={contents:this.descriptionText,valign:"top",overflow:"hidden"};this.headerLabelProperties={styleName:this.className+"Header"};this.Super("initWidget",arguments)}
,isc.A.makeFooter=function(){if(!this.showFooter||this.canDragResize==false)return;var _1=this.createAutoChild("resizer",{dragTarget:this,styleName:this.baseStyle+"Resizer"});this.addChild(_1);if(this.resizer)this.resizer.bringToFront()}
,isc.A.setDescriptionText=function(_1){this.descriptionText=_1;this.body.setContents(_1)}
,isc.A.click=function(){if(this.$53u)return;var _1=this.calendar;var _2=_1.eventClick(this.event,this.$53i?"week":"day");if(_2){if(!_1.canEditEvent(this.event))return;if(this.$53i)_1.weekView.clearSelection();else _1.dayView.clearSelection();var _3=_1.weekView.isLabelCol(0)?1:0;var _4=this.$53i?this.event[_1.startDateField].getDay()-
_1.firstDayOfWeek+_3:_3;if(this.$53i&&_1.showWeekends==false)_4--;var _5=this.event[_1.startDateField].getHours()*2;_1.$53l(_5,_4,null,this)}}
,isc.A.mouseDown=function(){this.calendar.eventDialog.hide();return isc.EH.STOP_BUBBLING}
,isc.A.sizeToEvent=function(){var _1=this.calendar,_2=this.event;if(!this.$53v){var _3=(this.$53i?_1.weekView:_1.dayView);var _4=_3.getRowHeight(1),_5=_3.getColumnWidth(_3.isLabelCol(0)?1:0);var _6=_2[_1.endDateField].getHours()==0?24:_2[_1.endDateField].getHours();var _7=(_6-_2[_1.startDateField].getHours())*(_4*2),_8=_5;if(_1.weekEventBorderOverlap&&this.$53i)_8+=1;if(_2[_1.startDateField].getMinutes()>0){_7-=_1.$54g(_2[_1.startDateField].getMinutes(),_4)}
if(_2[_1.endDateField].getMinutes()>0){_7+=_1.$54g(_2[_1.endDateField].getMinutes(),_4)}
var _9=_2[_1.startDateField].getHours()*(_4*2);if(_2[_1.startDateField].getMinutes()>0){_9+=_1.$54g(_2[_1.startDateField].getMinutes(),_4)}
var _10=1000*60*60*24;var _11=(_3.showLabelColumn&&_3.labelColumnPosition=="left");var _12=_1.showWeekends?0:_10;var _13=_11?_3.labelColumnWidth:0;if(_3.$53i){_13=(Math.floor((_2[_1.startDateField].getTime()
-_1.chosenWeekStart.getTime()-_12)/_10)*_5)+(_11?_3.labelColumnWidth:0)}
this.resizeTo(_8,_7);this.moveTo(_13,_9)}else{this.$53v=false}
var _14=_2[_1.startDateField].getHours();var _15=_2[_1.startDateField].getMinutes();var _16=_1.$53n(_14)+(_15<10?":0"+_15:":"+_15)+(_14>11?"PM":"AM")+" "+_2[_1.nameField];this.setTitle(_16)}
,isc.A.getHoverHTML=function(){var _1=this.calendar,_2=this.event;var _3=_2[_1.startDateField].getHours();var _4=_2[_1.startDateField].getMinutes();var _5=_1.$53n(_3)+(_4<10?":0"+_4:":"+_4)+(_3>11?"PM":"AM");var _6=_2[_1.endDateField].getHours();var _7=_2[_1.endDateField].getMinutes();var _8=_1.$53n(_6)+(_7<10?":0"+_7:":"+_7)+(_6>11?"PM":"AM");return _2[_1.startDateField].toShortDate()+" "+_5+" - "+_8+"</br></br>"+_2[_1.nameField]+"</br></br>"+_2[_1.descriptionField]}
,isc.A.closeClick=function(){this.Super('closeClick');this.calendar.removeEvent(this.event,true);this.$53u=true}
,isc.A.parentResized=function(){this.Super('parentResized',arguments);this.sizeToEvent()}
,isc.A.getEventLength=function(){var _1=this.event[this.calendar.startDateField];var _2=this.event[this.calendar.endDateField];var _3=(_2.getHours()-_1.getHours())*60;_3=_3-_1.getMinutes()+_2.getMinutes();return _3}
,isc.A.dragRepositionStart=function(){var _1=this.getTop()%this.parentElement.snapVGap;this.parentElement.VSnapOrigin=_1}
,isc.A.dragRepositionStop=function(){this.Super('dragRepositionStop',arguments);var _1=this.ns.EH,_2=this.parentElement.getEventColumn(),_3=(_1.dragMoveTarget.getTop()-this.parentElement.getPageTop())+this.parentElement.getScrollTop(),_4=this.parentElement.getRowSize(1),_5=Math.floor(_3/ _4),_6=this.calendar,_7=(this.$53i?_6.weekView:_6.dayView);if(_7.isLabelCol(_2)||_7.colDisabled(_2))return false;var _8=_6.$53m(_5,_2);var _9=Math.floor((_3-(_4*_5))*(30/_4));_8.setMinutes(_8.getMinutes()+_9);_8=_6.getValidSnapDate(this.event[_6.startDateField],_8);if(!_6.eventMoved(_8,this.event))return false;var _10=new Date(_8.getFullYear(),_8.getMonth(),_8.getDate(),_8.getHours(),_8.getMinutes());_10.setMinutes(_10.getMinutes()+this.getEventLength());_6.updateEvent(this.event,_8,_10,this.event[_6.nameField],this.event[_6.descriptionField],true);return true}
,isc.A.dragResizeStart=function(){var _1=(this.getTop()+this.getVisibleHeight())%this.parentElement.snapVGap;this.parentElement.VSnapOrigin=_1}
,isc.A.dragResizeStop=function(){this.Super('dragResizeStop',arguments);var _1=this.ns.EH,_2=this.parentElement.getEventColumn(),_3=(_1.dragMoveTarget.getTop()-this.parentElement.getPageTop())+this.parentElement.getScrollTop()+_1.dragMoveTarget.getVisibleHeight(),_4=this.parentElement.getRowSize(1),_5=Math.floor(_3/ _4),_6=this.calendar;var _7=_6.$53m(_5,_2);var _8=Math.floor((_3-(_4*_5))*(30/_4));_7.setMinutes(_7.getMinutes()+_8);_7=_6.getValidSnapDate(this.event[_6.endDateField],_7);if(_1.dragMoveTarget.getVisibleHeight()<_4)return false;if(!_6.eventResized(_7,this.event))return false;_6.updateEvent(this.event,this.event[_6.startDateField],_7,this.event[_6.nameField],this.event[_6.descriptionField],true);this.$54h=false}
);isc.B._maxIndex=isc.C+14;isc.Calendar.registerStringMethods({getDayBodyHTML:"date, events, calendar, rowNum, colNum",getDayHeaderHTML:"date, events, calendar, rowNum, colNum",dayBodyClick:"date, events, calendar, rowNum, colNum",dayHeaderClick:"date, events, calendar, rowNum, colNum",eventClick:"event, viewName",eventChanged:"event",eventMoved:"newDate, event",eventResized:"newDate, event"});isc.A=isc.DaySchedule;isc.A.$53o=[{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""},{label:"",day1:"",day2:"",day3:"",day4:"",day5:"",day6:"",day7:""}];isc._moduleEnd=isc._Calendar_end=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc.Log&&isc.Log.logIsInfoEnabled('loadTime'))isc.Log.logInfo('Calendar module init time: ' + (isc._moduleEnd-isc._moduleStart) + 'ms','loadTime');}else{if(window.isc && isc.Log && isc.Log.logWarn)isc.Log.logWarn("Duplicate load of module 'Calendar'.");}
/*
 * Isomorphic SmartClient
 * Version 7.0beta2 (2008-11-15)
 * Copyright(c) 1998-2007 Isomorphic Software, Inc. All rights reserved.
 * "SmartClient" is a trademark of Isomorphic Software, Inc.
 *
 * licensing@smartclient.com
 *
 * http://smartclient.com/license
 */

